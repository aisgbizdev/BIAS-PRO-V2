// Instagram Complete Knowledge Base - Reels, Growth, Engagement
// Updated for 2025 - Awam-Friendly & Actionable

export const InstagramKnowledge = {
  // REELS ALGORITHM SECRETS
  reels: {
    algorithm: {
      howItWorks: "Instagram Reels algorithm mirip TikTok - prioritize watch time, engagement, shares. Bedanya: follower interactions weighted lebih tinggi di IG.",
      
      rankingFactors: [
        {
          factor: "Watch Time & Replays",
          importance: "CRITICAL",
          explanation: "Berapa kali orang nonton Reel kamu sampai habis + replay",
          optimization: [
            "Duration sweet spot: 7-15 detik (highest retention)",
            "Loop-able content (ending connects to beginning)",
            "Save the best for last (payoff di detik terakhir)"
          ]
        },
        {
          factor: "Shares & Saves",
          importance: "VERY HIGH",
          explanation: "IG prioritize content yang orang share ke DM atau save for later",
          howToBoost: [
            "Create 'shareable' moments (relatable, funny, informative)",
            "Educational content = high save rate",
            "End with 'Save this for later!' CTA"
          ]
        },
        {
          factor: "Likes & Comments",
          importance: "HIGH",
          explanation: "Standard engagement metrics",
          tactics: [
            "Ask question di caption yang bikin orang comment",
            "Controversial takes (tastefully) = high comment rate",
            "Reply to comments immediately = boost"
          ]
        },
        {
          factor: "Audio Usage",
          importance: "MEDIUM-HIGH",
          explanation: "Trending audio get distribution boost",
          tip: "Use trending audio within 48 hours of trending. Check Reels → Audio page untuk current trends"
        }
      ],
      
      differencesFromTikTok: [
        "IG rewards follower engagement more (your followers see your content first)",
        "Cross-posting to Feed + Stories + Reels = algorithm boost",
        "Hashtags still matter on IG (unlike TikTok where it's minimal)",
        "Photo carousels can compete with Reels for reach"
      ]
    },
    
    contentStrategy: {
      formats: {
        tutorial: {
          structure: "Problem (2s) → Solution steps (10s) → Result (3s)",
          example: "Can't afford expensive camera? → Use phone + these 3 settings → Pro-quality videos",
          performanceTip: "Step-by-step visuals > talking head. Show, don't tell."
        },
        
        transformation: {
          structure: "Before state → Process/Journey → After reveal",
          example: "Room makeover, fitness journey, skill progression",
          hook: "Lead with dramatic 'after' for 1 second, then show 'before' to create curiosity gap"
        },
        
        behindTheScenes: {
          structure: "Polished result → How it's actually made (messy reality)",
          example: "Perfect IG photo → setup reality (tripod, 50 takes, editing)",
          appeal: "Authenticity content performing very well in 2025"
        },
        
        trendjacking: {
          structure: "Trending audio/format + your niche twist",
          example: "Dance trend → add your industry context (teacher, doctor, entrepreneur version)",
          timing: "Jump on trends within 24-48 hours max"
        }
      },
      
      contentPillars: {
        explanation: "3-5 recurring themes untuk consistency & niche authority",
        example: {
          fitnessCreator: [
            "Pillar 1: Quick workouts (30s-1min routines)",
            "Pillar 2: Nutrition tips",
            "Pillar 3: Motivation/mindset",
            "Pillar 4: Transformation stories"
          ],
          businessCreator: [
            "Pillar 1: Growth tactics",
            "Pillar 2: Tool recommendations",
            "Pillar 3: Mistakes to avoid",
            "Pillar 4: Behind-the-scenes"
          ]
        },
        ratio: "80% pillar content (reliable) + 20% experimental/trending"
      }
    }
  },
  
  // GROWTH STRATEGIES
  growth: {
    organicTactics: [
      {
        tactic: "Carousel Posts (Photo Dumps)",
        why: "IG algorithm loves carousels - people swipe = extended engagement time",
        howTo: "10 slides max, strong hook on slide 1, value throughout, CTA on last slide",
        performance: "Carousels get 3x more saves than single images"
      },
      {
        tactic: "Story Engagement Loops",
        why: "High story viewers = algorithm thinks you're valuable creator",
        howTo: [
          "Post 3-7 stories/day with stickers (polls, questions, quizzes)",
          "Reply to ALL story responses within 1 hour",
          "Share Reels to story (cross-promotion)"
        ],
        metric: "Target: 30%+ story completion rate"
      },
      {
        tactic: "Collaborative Posts",
        why: "Reach 2 audiences at once, algorithm boost",
        howTo: "Collab with creators 1-3x your size, complementary niches, split content creation",
        frequency: "1-2 collabs per month minimum"
      },
      {
        tactic: "Engagement Pods (Strategic)",
        why: "Early engagement = algorithm distributes wider",
        howTo: "5-10 trusted creators, engage within first 30 min of each other's posts",
        warning: "Don't overdo - algorithm can detect fake engagement pods. Keep it authentic."
      },
      {
        tactic: "DM Outreach",
        why: "Build real relationships = loyal audience",
        howTo: "Reply to comments in DMs, reach out to engaged followers, ask for feedback",
        impact: "Personal touch = 10x more likely to convert to superfan"
      }
    ],
    
    hashtagStrategy: {
      formula: "25-30 hashtags total (IG allows 30 max)",
      breakdown: [
        "5-7 high-traffic hashtags (100K-1M posts) - broad reach",
        "10-15 medium-traffic (10K-100K) - sweet spot",
        "5-7 low-traffic (<10K) - niche authority",
        "3-5 branded hashtags - your unique tags"
      ],
      placement: "Caption or first comment doesn't matter anymore (both work)",
      research: "Check competitors' top posts, see which hashtags they use. Test & iterate.",
      refresh: "Update hashtag sets every 2-3 weeks, track which perform best"
    },
    
    postingSchedule: {
      frequency: {
        minimum: "3-4 posts per week (Reels priority)",
        optimal: "1 Reel/day + 2-3 carousels/week + Stories daily",
        advanced: "2 Reels/day + 1 carousel every other day + Stories 2x daily"
      },
      
      timing: {
        indonesia: [
          "Best times: 7-9 AM, 12-1 PM, 7-9 PM",
          "Wednesday-Friday perform better than Monday-Tuesday",
          "Sunday evening: high leisure browsing time"
        ],
        testing: "Use IG Insights → 'Your audience' → 'Most Active Times' for personalized data"
      },
      
      consistency: "Algorithm rewards regular posting. Better 3 posts/week consistently than 7 posts one week, 0 next week."
    }
  },
  
  // ENGAGEMENT TACTICS
  engagement: {
    captionFormulas: {
      storytelling: {
        format: "Hook line → Mini story (3-5 sentences) → CTA question",
        example: "I almost quit Instagram 6 months ago. 234 followers, zero engagement, feeling invisible. Then I changed ONE thing... (continues) → What's your biggest IG struggle right now?",
        performance: "Personal stories = 50% more comments than generic captions"
      },
      
      valueFirst: {
        format: "Bold claim → Proof points → Implementation steps",
        example: "You don't need 10K followers to make money on IG. I made my first $500 at 1.2K followers. Here's how: (list 3-5 steps) → Which strategy will you try first?",
        savability: "Actionable content = high save rate"
      },
      
      controversial: {
        format: "Unpopular opinion → Why you believe it → Invite debate",
        example: "Unpopular opinion: Buying followers actually HURTS your account more than having low follower count. Here's why... → Agree or disagree?",
        warning: "Be controversial, not offensive. Know the line."
      }
    },
    
    storyStrategies: {
      dailyRoutines: [
        "Morning: Behind-the-scenes of your day (relatable moments)",
        "Afternoon: Poll/Question sticker (what should I post next?)",
        "Evening: Share Reel to story + add context",
        "Night: Mini tip atau motivational quote"
      ],
      
      interactiveStickers: {
        mostEffective: [
          "Poll: Binary choice questions (A vs B)",
          "Question: 'Ask me anything about [your niche]'",
          "Quiz: Test their knowledge (educational + fun)",
          "Countdown: Launch teasers, event announcements"
        ],
        responseRate: "Target 10%+ sticker interactions"
      },
      
      conversion: "Every 5-7 stories, include 1 CTA story (link, product, service) - don't oversell"
    },
    
    communityBuilding: {
      tactics: [
        "Feature followers: Repost UGC (user-generated content) to your story with credit",
        "Create inside jokes/recurring segments: Build community culture",
        "Host challenges: Engage audience to participate, repost best entries",
        "Go live regularly: Real-time interaction = strongest connection"
      ],
      
      superfanStrategy: "Identify top 20 engagers, DM personal thanks, give exclusive previews. They become your word-of-mouth marketing."
    }
  },
  
  // MONETIZATION PATHS
  monetization: {
    milestones: {
      "1K-5K followers": {
        opportunities: [
          "Affiliate marketing (Amazon, niche products)",
          "Digital products (ebooks, templates, presets)",
          "Small brand collaborations (product exchanges)"
        ],
        income: "$50-$300/month realistic"
      },
      
      "5K-10K followers": {
        opportunities: [
          "Sponsored posts ($100-$300 per post)",
          "Brand ambassadorships",
          "Online courses/coaching",
          "Paid partnerships"
        ],
        income: "$300-$1,000/month realistic"
      },
      
      "10K+ followers": {
        opportunities: [
          "Swipe-up links (verified accounts)",
          "Higher-tier sponsorships ($500-$2K+ per post)",
          "Product launches",
          "Speaking engagements"
        ],
        income: "$1,000-$10,000+/month possible"
      }
    },
    
    rateCalculation: {
      formula: "Base rate = (Followers ÷ 100) × Engagement Rate × 10",
      example: "5K followers, 5% engagement = ($50) × 5 × 10 = $250 per sponsored post",
      negotiation: "Start 20% higher than calculation, negotiate down"
    }
  },
  
  // TROUBLESHOOTING
  commonIssues: {
    "Low reach on Reels": {
      causes: [
        "Poor hook - people scroll within 1 second",
        "Trending audio used too late (>7 days old)",
        "Low-quality video (blurry, bad lighting)",
        "No clear value proposition"
      ],
      fixes: [
        "A/B test 3 different hooks for same content",
        "Use audio within 48 hours of trending",
        "Invest in ring light + phone stabilizer ($30-50 total)",
        "First 3 seconds: What will viewer GAIN from watching?"
      ]
    },
    
    "Engagement dropped suddenly": {
      causes: [
        "Algorithm change (happens every few months)",
        "Content consistency shifted",
        "Posting times changed",
        "Shadowban (violated community guidelines)"
      ],
      fixes: [
        "Review recent posts - which type performed worst? Reduce those.",
        "Return to content pillars that worked before",
        "Revert to previous posting schedule",
        "Check if shadowbanned: Search your hashtags in incognito, see if your posts appear"
      ]
    },
    
    "Stuck at follower plateau": {
      causes: [
        "Content too similar (algorithm stops distributing to new people)",
        "Not leveraging other platforms for cross-promotion",
        "No collaborations/network effects"
      ],
      fixes: [
        "Introduce 1 new content format/pillar",
        "Share IG content on TikTok, YouTube Shorts",
        "Reach out for 2-3 collabs per month",
        "Engage heavily in your niche (comment on big accounts)"
      ]
    }
  },
  
  // 2025 TRENDS
  trends2025: {
    contentShifts: [
      "Raw, unedited content > polished production (authenticity wins)",
      "Educational Reels outperforming entertainment",
      "Longer captions making comeback (storytelling format)",
      "Photo carousels competitive with Reels again"
    ],
    
    features: [
      "Instagram Notes: Quick updates (like Twitter), high visibility",
      "Broadcast Channels: Direct messaging to followers (like newsletter)",
      "Collabs 2.0: Tag multiple collaborators, split reach"
    ],
    
    monetization: [
      "Creator marketplace expansion",
      "In-app shop integration improvements",
      "Subscription feature growing (monthly recurring revenue)"
    ]
  }
};

export function getInstagramTip(topic: string): string {
  const tips: Record<string, string> = {
    reels: "7-15s duration, trending audio <48hrs old, strong hook in first second, loop-able format, share to story for extra reach",
    growth: "1 Reel/day + Stories daily + engage 30min/day in niche. Consistency beats perfection.",
    engagement: "Reply ALL comments within 1hr, use question stickers in stories, DM your top engagers personally",
    hashtags: "25-30 total: mix high/medium/low traffic. Research competitors, update every 2-3 weeks",
    monetization: "Start affiliate at 1K followers, pitch brands at 5K, premium sponsorships at 10K+"
  };
  
  return tips[topic.toLowerCase()] || "Topic not found. Try: reels, growth, engagement, hashtags, monetization";
}
